<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="Issue33.002" author="pLytvynenko">
        <createTable tableName="role">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue33.003" author="pLytvynenko">
        <createTable tableName="permission">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue33.004" author="pLytvynenko">
        <createTable tableName="role_permission">
            <column name="ROLE_ID" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="role_permission_pkey"
                             references="role(ID)"
                             foreignKeyName="role_fk"/>
            </column>
            <column name="PERMISSION_ID" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="role_permission_pkey"
                             references="permission(ID)"
                             foreignKeyName="permission_fk"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue33.005" author="pLytvynenko">
        <createTable tableName="news">
            <column name="ID" type="BIGINT">
                <constraints primaryKey="true"
                             nullable="false"
                             primaryKeyName="news_pkey"/>
            </column>
            <column name="CREATE_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="PHOTO_URL" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="SOURCE" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="TEXT" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="TITLE" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATE_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue33.006" author="pLytvynenko">
        <createTable tableName="account">
            <column name="ID" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="account_pkey"/>
            </column>
            <column name="CONTACTS" type="VARCHAR">
                <constraints nullable="true"/>
            </column>
            <column name="CREATE_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREDENTIALS_EXPIRED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="EMAIL" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="ENABLED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="EXPIRED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="FIRST_NAME" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_NAME" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="LOCKED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="PASSWORD" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATE_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue33.007" author="pLytvynenko">
        <createTable tableName="account_role">
            <column name="ROLE_ID" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="account_role_pkey"
                             references="role(ID)"
                             foreignKeyName="role_fk"/>
            </column>
            <column name="ACCOUNT_ID" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="account_role_pkey"
                             references="account(ID)"
                             foreignKeyName="account_fk"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="Issue104.001" author="Arthurpanda">
        <createTable tableName="users">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="MIDDLE_NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="SECOND_NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="PASPORT" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="LOGIN" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="PASSWORD" type="VARCHAR(15)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.002" author="pLytvynenko">
        <createTable tableName="adverts">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="TITLE" type="VARCHAR(150)">
                <constraints nullable="false"/>
            </column>
            <column name="TEXT" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="DATE" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="IS_MODERATED" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="USER_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="user_fk"
                             references="users(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.003" author="pLytvynenko">
        <createTable tableName="roles">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(20)">
                <constraints nullable="false"
                             unique="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.004" author="pLytvynenko">
        <createTable tableName="permissions">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(20)">
                <constraints nullable="false"
                             unique="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.005" author="pLytvynenko">
        <createTable tableName="role_permissions">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="ROLE_ID" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="role_permission_pkey"
                             references="roles(ID)"
                             foreignKeyName="role_fk"/>
            </column>
            <column name="PERMISSION_ID" type="BIGINT">
                <constraints nullable="false"
                             primaryKey="true"
                             primaryKeyName="role_permission_pkey"
                             references="permissions(ID)"
                             foreignKeyName="permission_fk"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.006" author="pLytvynenko">
        <createTable tableName="addresses">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="REGION" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="CITY" type="VARCHAR(25)">
                <constraints nullable="false"/>
            </column>
            <column name="DISTRICT" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="STREET" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="HOUSE_BLOCK" type="INTEGER">
                <constraints nullable="true"/>
            </column>
            <column name="HOUSE_NUMBER" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="ZIP_CODE" type="INTEGER">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.007" author="pLytvynenko">
        <createTable tableName="cooperation">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="USERO" type="VARCHAR(12)">
                <constraints nullable="false"
                             unique="true"/>
            </column>
            <column name="IBAN" type="VARCHAR(34)">
                <constraints nullable="false"
                             unique="true"/>
            </column>
            <column name="REGISTER_DATE" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="IS_ACTIVE" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="ADDRESS_ID" type="NUMERIC">
                <constraints nullable="false"
                             unique="true"
                             foreignKeyName="cooperation_fk"
                             references="addresses(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.008" author="pLytvynenko">
        <createTable tableName="houses">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="QUANTITY_FLAT" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="HOUSE_AREA" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="ADJOINING_AREA" type="INTEGER">
                <constraints nullable="true"/>
            </column>
            <column name="ADDRESS_ID" type="NUMERIC">
                <constraints nullable="false"
                             unique="true"
                             foreignKeyName="address_fk"
                             references="addresses(ID)"/>
            </column>
            <column name="COOPERATION_ID" type="NUMERIC">
                <constraints nullable="false"
                             unique="true"
                             foreignKeyName="cooperation_fk"
                             references="cooperation(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.009" author="pLytvynenko">
        <createTable tableName="flats">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="NUMBER" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="AREA" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="QUANTITY_TENANT" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="TITLE_DEED" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="HOUSE_ID" type="NUMERIC">
                <constraints nullable="false"
                             unique="true"
                             foreignKeyName="house_fk"
                             references="houses(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.010" author="pLytvynenko">
        <createTable tableName="user_flats">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="OWNER_PERCENT" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="USER_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="user_fk"
                             references="users(ID)"/>
            </column>
            <column name="FLAT_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="flat_fk"
                             references="flats(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.011" author="pLytvynenko">
        <createTable tableName="user_cooperation">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="COOPERATION_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="cooperation_fk"
                             references="cooperation(ID)"/>
            </column>
            <column name="USER_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="user_fk"
                             references="users(ID)"/>
            </column>
            <column name="ROLE_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="role_fk"
                             references="roles(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.012" author="pLytvynenko">
        <createTable tableName="emails">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="EMAIL" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.013" author="pLytvynenko">
        <createTable tableName="phones">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="PHONE" type="VARCHAR(15)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.014" author="pLytvynenko">
        <createTable tableName="email_cooperation">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="EMAIL_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="email_fk"
                             references="emails(ID)"/>
            </column>
            <column name="COOPERATION_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="cooperation_fk"
                             references="cooperation(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.015" author="pLytvynenko">
        <createTable tableName="phone_cooperation">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="PHONE_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="phone_fk"
                             references="phones(ID)"/>
            </column>
            <column name="COOPERATION_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="cooperation_fk"
                             references="cooperation(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.016" author="pLytvynenko">
        <createTable tableName="phone_users">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="PHONE_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="phone_fk"
                             references="phones(ID)"/>
            </column>
            <column name="USER_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="user_fk"
                             references="users(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.017" author="pLytvynenko">
        <createTable tableName="email_user">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="PHONE_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="phone_fk"
                             references="phones(ID)"/>
            </column>
            <column name="USER_ID" type="NUMERIC">
                <constraints nullable="false"
                             foreignKeyName="user_fk"
                             references="users(ID)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.018" author="pLytvynenko">
        <createTable tableName="vote">
            <column name="ID" type="NUMERIC">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="TITLE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="DATE_BEGIN" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="DATE_END" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="IS_OPEN" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="PROS" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="CONS" type="INTEGER">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="Issue104.sequence" author="pLytvynenko">
        <createSequence sequenceName="hibernate_sequence"/>
        <sql dbms="postgresql">
            alter sequence hibernate_sequence owner to postgres;
        </sql>
    </changeSet>

    <!--    <changeSet id="Issue33.005" author="pLytvynenko">-->
    <!--        <createTable tableName="news">-->
    <!--            <column name="ID" type="BIGINT">-->
    <!--                <constraints primaryKey="true"-->
    <!--                             nullable="false"-->
    <!--                             primaryKeyName="news_pkey"/>-->
    <!--            </column>-->
    <!--            <column name="CREATE_DATE" type="TIMESTAMP">-->
    <!--                <constraints nullable="false"/>-->
    <!--            </column>-->
    <!--            <column name="DESCRIPTION" type="VARCHAR">-->
    <!--                <constraints nullable="false"/>-->
    <!--            </column>-->
    <!--            <column name="PHOTO_URL" type="VARCHAR">-->
    <!--                <constraints nullable="false"/>-->
    <!--            </column>-->
    <!--            <column name="SOURCE" type="VARCHAR">-->
    <!--                <constraints nullable="false"/>-->
    <!--            </column>-->
    <!--            <column name="TEXT" type="VARCHAR">-->
    <!--                <constraints nullable="false"/>-->
    <!--            </column>-->
    <!--            <column name="TITLE" type="VARCHAR">-->
    <!--                <constraints nullable="false"/>-->
    <!--            </column>-->
    <!--            <column name="UPDATE_DATE" type="TIMESTAMP">-->
    <!--                <constraints nullable="false"/>-->
    <!--            </column>-->
    <!--        </createTable>-->
    <!--    </changeSet>-->

</databaseChangeLog>